(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"2YZa":function(e,t,n){"use strict";n.r(t);var s,o=n("q1tI"),r=n.n(o),a=n("i8i4"),l=n.n(a),i=n("wd/R"),d=n.n(i),c=(n("Q8kY"),n("/EAt")),u=n("Imu7"),p=n("sRsu"),m=n("3PeG"),h=n("wzcM"),f=n("Uf6+"),v=n("R/WZ"),g=n("DoPP"),y=n("K+qn"),j=n("Glqu"),x=n("NpuA"),b=n.n(x);!function(e){e[e.PropertiesBase=0]="PropertiesBase",e[e.PropertiesTenants=1]="PropertiesTenants",e[e.PropertiesSchedules=2]="PropertiesSchedules",e[e.PropertiesLastInspection=3]="PropertiesLastInspection"}(s||(s={}));const E=[{title:"Property Street Address 1",field:"address"},{title:"Property City",field:"city"},{title:"Property State",field:"state"},{title:"Property Zip",field:"zip",type:"number"},{title:"Unit",field:"unit",isImportOptional:!0},{title:"Unit Name",field:"unit",isImportOptional:!0},{title:"Lease From",field:"leaseStart",type:"date",isImportOptional:!0},{title:"Lease To",field:"leaseEnd",type:"date",isImportOptional:!0},{title:"Move-out",field:"moveOut",type:"date",isImportOptional:!0}],k=/Inspection \d+/,w=E[0].title,S=(e,t)=>(e[t.title]=t,e),O=E.reduce(S,{}),I=[{title:"Tenant",field:"name",isImportOptional:!0},{title:"Phone Numbers",field:"phone",isImportOptional:!0},{title:"Emails",field:"email",isImportOptional:!0}].reduce(S,{}),C=[{title:"Inspection Date",field:"date",isSchedField:!0,type:"date"},{title:"Inspection Number",field:"number",isSchedField:!0},{title:"Property Street Address 1",field:"address"},{title:"Property City",field:"city"},{title:"Property State",field:"state"},{title:"Property Zip",field:"zip",type:"number"},{title:"Unit",field:"unit"},{title:"Lease From",field:"leaseStart",type:"date"},{title:"Lease To",field:"leaseEnd",type:"date"},{title:"Move-out",field:"moveOut",type:"date"},{title:"Inspection Type",field:"type",isSchedField:!0}].reduce(S,{}),z=[{title:"Last Inspection Date",field:"date",type:"date",isSchedField:!0}].reduce(S,{});function P(e){return e.unit?e.address+" "+e.unit:e.address}function M(e,t){if(void 0===e.unit&&void 0!==t.unit||void 0!==e.unit&&void 0===t.unit)return!1;return e.address===t.address&&e.city===t.city&&e.state===t.state&&e.zip===t.zip}function L(e){return e.map(e=>P(e.p)+" "+e.si.d.format(K)).join(" ")}function D(e){const t=parseFloat(e);if(!isNaN(t)&&isFinite(e))return t}function F(e){if(Object(i.isMoment)(e))return e}var B=n("tB9+"),N=n.n(B),T=n("yzbm");const U=e=>{const[t,n]=r.a.useState(),[o,a]=r.a.useState(!1),l=r.a.useCallback(()=>{t&&n(void 0)},[t]),{getRootProps:i,getInputProps:c,isDragActive:u}=Object(T.a)({onDrop:t=>{if(t.length<1)return void n("Only single CSV file drop allowed");const o=t[0];!function(e){return e.name.endsWith(".csv")}(o)?n("File is not CSV"):(a(!0),function(e,t,n,o){let r=[],a=0;const l={header:!0,worker:!1,skipEmptyLines:!1,transform:(e,n)=>{var o,r;if(e.length<=0){const o=O[n];if(!o){if(t==s.PropertiesSchedules&&k.test(String(n)))return;if(t==s.PropertiesTenants&&Object.keys(I).find(e=>e===n))return;return e}if(o.isImportOptional)return;if(n===w)return;return"<no data>"}switch(null===(o=O[n])||void 0===o?void 0:o.type){case"date":return d()(e,K);case"number":return parseInt(e)}return t==s.PropertiesSchedules&&k.test(String(n))||t==s.PropertiesLastInspection&&"date"==(null===(r=z[n])||void 0===r?void 0:r.type)?d()(e,K):e},step:(e,n)=>{var l;if(a++,e.errors.length>0)return 1==e.errors.length&&"TooFewFields"===e.errors[0].code?void console.log("Skipping empty line "+(a+1)):(o(e.errors.map(e=>"Line "+(e.row+1)+": "+e.message).join()),void n.abort());let i,d={pid:""+a,address:""};if("object"==typeof e.data&&(i=e.data),!i)return o("Internal error; failed to parse CSV row with headers"),void n.abort();if(Object.keys(i).every(e=>!i[e]||0==String(i[e]).trim().length||"<no data>"===i[e]))return void console.log("Skipping empty line "+(a+1));"Total"===i[w]?console.log("Skipping 'Total' row "+(a+1)):(Object.keys(i).forEach(e=>{var r,l,c;const u=O[e];if(u){if("number"==u.type&&isNaN(i[e]))return o("Invalid data '"+i[e]+"' for column '"+e+"' in row "+(a+1)),void n.abort();d[u.field]=i[e]}else if(t==s.PropertiesSchedules&&k.test(e)){const t=i[e];if(t&&t.isValid()){let e=null!==(r=d.schedule)&&void 0!==r?r:[];d.schedule=e,d.schedule.push({d:t,isImport:!0})}}else if(t==s.PropertiesLastInspection&&Object.keys(z).find(t=>t===e)){const t=i[e];if(t&&t.isValid()){let e=null!==(l=d.schedule)&&void 0!==l?l:[];d.schedule=e,d.schedule.push({d:t,isImport:!0})}}else if(t==s.PropertiesTenants&&Object.keys(I).find(t=>t===e)){const t=I[e];d.tenants||(d.tenants=[]);let n=d.tenants.find(e=>e.tid===""+a);n||(n={tid:""+a,name:""},d.tenants.push(n)),n[t.field]=i[e]}else{if(t==s.PropertiesSchedules||t==s.PropertiesLastInspection)return o("Unhandled column in input file: "+e),void n.abort();d.extra=null!==(c=d.extra)&&void 0!==c?c:{},d.extra[e]=i[e]}}),null===(l=d.schedule)||void 0===l||l.sort((e,t)=>e.d.unix()-t.d.unix()),r.push(d))},complete:e=>{console.log("Parsed "+r.length+" properties"),n(r)}};b.a.parse(e,l)}(o,e.type,t=>{const s=e.handleData(t);a(!1),s&&(console.log("Failed parsing: "+s),n(s))},e=>{console.log("Failed parsing: "+e),n(e)}))},onDragEnter:l,multiple:!1});let p="dropZone dropzoneTextStyle";return u?p+=" stripes":t?p+=" rejectStripes":o&&(p+=" processingStripes"),r.a.createElement("div",Object.assign({className:p},i()),r.a.createElement("input",Object.assign({},c())),r.a.createElement("div",null,e.message),t&&r.a.createElement("div",null,t),r.a.createElement(N.a,{style:{width:"51",height:"51",color:"#909090"}}))};var A=n("Z3vd"),R=n("5Gel");const Y=()=>{const[e,t]=r.a.useState(),n=Boolean(e),s=n?"simple-popover":void 0;return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"App-header"},r.a.createElement("p",null,"REI Scheduler",r.a.createElement(A.a,{"aria-describedby":s,style:{marginLeft:"10px"},variant:"contained",color:"primary",onClick:e=>t(e.currentTarget)},"Instructions"))),r.a.createElement(R.a,{id:s,open:n,anchorEl:e,onClose:()=>t(void 0),anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement("div",null,"Version: 2021.07.28"),r.a.createElement("div",null,"Input a ",r.a.createElement("strong",null,"base properties list")," to determine what properties to use. If it contains a historical schedule, this will also be imported. The scheduler will execute and generate schedules. Columns: Property Street Address 1, Property City, Property State, Property Zip (numeric), Unit (or 'Unit Name'), Lease From (mm/dd/yyyy), Lease To (mm/dd/yyyy), Move-out (mm/dd/yyyy); optional columns: Inspection 1 (mm/dd/yyyy), Inspection 2 (mm/dd/yyyy), ..., Inspection N (mm/dd/yyyy)"),r.a.createElement("div",null,"Input a ",r.a.createElement("strong",null,"properties list with tenant details")," to decorate the current properties with tenant details. No new property rows are created. A base properties list must already exist. Row addresses may be duplicates, and each row will create a tenant record on the existing imported property list. Columns: Property Street Address 1, Property City, Property State, Property Zip (numeric), Unit, Lease From (mm/dd/yyyy), Lease To (mm/dd/yyyy), Move-out (mm/dd/yyyy), Tenant, Phone Numbers, Emails"),r.a.createElement("div",null,"Input a ",r.a.createElement("strong",null,"previous schedule")," to replace the schedule for the current properties list. No new property rows are created. The scheduler will execute and generate schedules. Scheduled dates with ",r.a.createElement("em",null,"Hist"),' are "historical" imported schedule events and are not moved by the scheduler. Remove the schedule for the input row to generate a new schedule for a property. Columns: Property Street Address 1, Property City, Property State, Property Zip (numeric), Unit, Lease From (mm/dd/yyyy), Lease To (mm/dd/yyyy), Move-out (mm/dd/yyyy); optional columns: Inspection 1 (mm/dd/yyyy), Inspection 2 (mm/dd/yyyy), ..., Inspection N (mm/dd/yyyy)'),r.a.createElement("div",null,"Input a ",r.a.createElement("strong",null,"last inspection dates list")," to truncate the schedule for any matching current property, replacing any dates after the last inspection date with that date. No new property rows are created. The scheduler will execute and generate schedules. Columns: Property Street Address 1, Property City, Property State, Property Zip (numeric), Unit Name (or 'Unit'), Last Inspection Date (mm/dd/yyyy)"),r.a.createElement("div",null,"Schedule dates with ",r.a.createElement("em",null,"MoveOut"),' are "move-out" inspections, scheduled the next day after a move-out or lease end and are not moved by the scheduler.')))};function V(e,t){let n=[...e];n=function(e,t){return e.map(e=>{var n;let s={...e};s.schedule||(s.schedule=[]);let o=null!==(n=e.moveOut)&&void 0!==n?n:e.leaseEnd;if(!e.leaseStart&&!o)return e.scheduleMessage="Unoccupied",console.log(P(e)+" missing lease start and lease end: Unoccupied"),s;if(!e.leaseStart)return e.scheduleMessage="Missing lease start",console.log(P(e)+" missing lease start"),s;let r=t.moveInBuffer(e.leaseStart);if(r.isBefore(t.scheduleStart)&&(r=t.scheduleStart),console.log(P(s)+" lease start is "+s.leaseStart.format(K)+" starting schedule after buffer at "+r.format(K)),!o){if(0==s.schedule.length){console.log("No existing schedule for "+P(s)+", adding dates every 3 months");for(let e=d()(r);e.isBefore(t.scheduleMax);e.add(3,"months"))s.schedule.push({d:d()(e)}),console.log("  "+P(s)+" added "+e.format(K))}else{console.log(P(s)+" has "+s.schedule.length+" existing schedule items");const e=d.a.duration(4.5,"months").asHours();Q(s.schedule);for(let t=0;t<s.schedule.length-1;++t){if(s.schedule[t+1].d.diff(s.schedule[t].d,"hours")>e){const n=d()(s.schedule[t].d).add(e/2,"hours").startOf("day");s.schedule.push({d:n}),console.log(P(s)+": inserted "+n.format(K)+" into schedule with a gap after "+s.schedule[t].d.format(K))}}}return s}const a=s.schedule.find(e=>e.isMoveOut);if(o.isBefore(t.scheduleStart)){if(s.scheduleMessage="Term ended",a)console.log(P(s)+" term ended"+o.format(K)+"; move-out already scheduled at "+a.d.format(K));else{const e=d()(t.scheduleStart).add(1,"day");console.log(P(s)+" term ended "+o.format(K)+"; scheduling move-out at "+e.format(K)),s.schedule.push({d:e,isMoveOut:!0})}return s}let l=t.moveOutBuffer(o);if(l.isAfter(t.scheduleMax)&&(l=t.scheduleMax),l.isBefore(t.scheduleStart)){if(s.scheduleMessage="Term end is too soon",a)console.log(P(s)+" term end is too soon"+l.format(K)+"; move-out already scheduled at "+a.d.format(K));else{const e=d()(o).add(1,"day");console.log(P(s)+" term end is too soon "+l.format(K)+"; scheduling move-out at "+e.format(K)),s.schedule.push({d:e,isMoveOut:!0})}return s}if(l.isBefore(r)){if(console.log(P(s)+" term is shorter than buffer, need to schedule asap"),0==s.schedule.length&&(console.log(P(s)+" scheduling asap "+t.scheduleStart.format(K)),s.schedule.push({d:d()(t.scheduleStart),isAsap:!0})),!a){const e=d()(o).add(1,"day");console.log(P(s)+" term is shorter than buffer "+l.format(K)+"; scheduling move-out at "+e.format(K)),s.schedule.push({d:e,isMoveOut:!0})}return s}if(s.schedule.length>0){const e=d.a.duration(4.5,"months").asHours();Q(s.schedule);for(let t=0;t<s.schedule.length-1;++t){if(s.schedule[t+1].d.isBefore(r))continue;if(s.schedule[t+1].d.diff(s.schedule[t].d,"hours")>e){const n=d()(s.schedule[t].d).add(e/2,"hours").startOf("day");s.schedule.push({d:n}),console.log(P(s)+": inserted "+n.format(K)+" into schedule with a gap after "+s.schedule[t].d.format(K))}}const t=s.schedule[s.schedule.length-1].d;r.isBefore(t)&&(r=d()(t).add(3,"months"),console.log(P(s)+": moved schedule start due to existing schedule ending at "+t.format(K)))}for(let e=d()(r);e.isBefore(l);e.add(3,"months"))s.schedule.push({d:d()(e)}),console.log(P(s)+" scheduled "+e.format(K));if(0==s.schedule.length&&(s.schedule.push({d:d()(t.scheduleStart)}),console.log(P(s)+" scheduled single entry at "+t.scheduleStart.format(K))),!a){const e=d()(o).add(1,"day");s.schedule.push({d:e,isMoveOut:!0}),console.log(P(s)+" scheduled move-out entry (after lease-end / move-out "+o.format(K)+") at "+e.format(K))}return s})}(n,t);let s=[];n.forEach(e=>{e.schedule.forEach((t,n)=>{s.push({p:e,si:t})})}),W(s),s=function(e,t){let n=e,s=0,o=s;for(;o<n.length;){let a=n[o];if(a.si.isImport){++o,s=o;continue}let l=a.si.d;if(l.isAfter(t.scheduleMax)){console.log(P(a.p)+" removing "+l.format(K)+" which is after schedule max: "+t.scheduleMax.format(K)),n.splice(o,1),o=s;continue}const i=e.find(e=>e.p.pid===a.p.pid&&e.si.isMoveOut);if(i&&!a.si.isMoveOut){const e=l.isAfter(i.si.d),t=l.week()===i.si.d.week();if(e||t){e?console.log(P(a.p)+" removing "+l.format(K)+" which is after scheduled move-out: "+i.si.d.format(K)):console.log(P(a.p)+" removing "+l.format(K)+" which is near scheduled move-out: "+i.si.d.format(K)),n.splice(o,1),o=s;continue}}let d=t.pushBlackout(l);if(!l.isSame(d)){console.log(P(a.p)+" pushed "+l.format(K)+" past a blackout period to "+d.format(K)),a.si.d=d,W(n),o=s;continue}const c=n.filter((e,t)=>t!=o&&e.si.d.isSame(l));if(c.length>t.maxPerDay-1){console.log("Inpsections ("+c.length+") passes max per day ("+t.maxPerDay+") for "+l.format(K)+": "+L(c));const e=c.filter(e=>e.si.isMoveOut||e.si.isImport);if(e.length<c.length){const a=c.filter(e=>!e.si.isMoveOut&&!e.si.isImport),i=r(a,t.maxPerDay-1-e.length);console.log("Moved ("+i.length+") inspections of "+a.length+" moveable for "+l.format(K)+": "+L(i)),W(n),o=s;continue}console.log("Inpsections not moveable ("+e.length+") (move-out or historical) for "+l.format(K)+": "+L(e))}const u=n.filter((e,t)=>t!=o&&e.si.d.week()==l.week());if(u.length>t.maxPerWeek-1){console.log("Inpsections ("+u.length+") passes max per week ("+t.maxPerWeek+") for week "+l.week()+": "+L(u));const e=u.filter(e=>e.si.isMoveOut||e.si.isImport);if(e.length<u.length){const a=u.filter(e=>!e.si.isMoveOut&&!e.si.isImport),i=r(a,t.maxPerWeek-1-e.length);console.log("Moved ("+i.length+") inspections of "+a.length+" moveable for week "+l.week()+": "+L(i)),W(n),o=s;continue}console.log("Inpsections not moveable ("+e.length+") (move-out or historical) for week "+l.week()+": "+L(e))}function r(e,t){let n=e.length-t,s=[],o=[];const r=e.filter(e=>M(e.p,a.p));r.length>0&&o.push(r);const l=e.filter(e=>!r.includes(e)),i=l.filter(e=>e.p.zip===a.p.zip);i.length>0&&o.push(i);let d=l.filter(e=>e.p.zip!==a.p.zip);d.length>0&&o.push(d),o.reverse();for(let e=0;e<o.length;++e)for(n>=o[e].length&&(o[e].forEach(e=>s.push(e)),n-=o[e].length,o[e]=[]);n>0&&o[e].length>0;){const t=o[e].filter(t=>M(t.p,o[e][o[e].length-1].p));t.forEach(e=>s.push(e)),n-=t.length,o[e]=o[e].filter(e=>!t.includes(e))}return s.forEach(e=>e.si.d.add(1,"day")),s}++o,s=o}return n}(s,t);let o={};return s.forEach(e=>{var t;let n=o[e.p.pid];n||(n={...e.p,schedule:[]},o[e.p.pid]=n),null===(t=n.schedule)||void 0===t||t.push(e.si)}),n.filter(e=>0===e.schedule.length).forEach(e=>{o[e.pid]={...e,scheduleMessage:e.scheduleMessage,schedule:[]}}),Object.keys(o).map(e=>o[e])}function W(e){e.sort((e,t)=>{var n,s,o,r;const a=e.si.d.unix()-t.si.d.unix();if(0!=a)return a;const l=(null!==(n=e.p.zip)&&void 0!==n?n:0)-(null!==(s=t.p.zip)&&void 0!==s?s:0);if(0!=l)return l;const i=(null!==(o=e.p.city)&&void 0!==o?o:"").localeCompare(null!==(r=t.p.city)&&void 0!==r?r:"");return 0!=i?i:e.p.address.localeCompare(t.p.address)})}function Q(e){e.sort((e,t)=>e.d.unix()-t.d.unix())}var Z=n("cVXz"),H=n("jjAL");const J=e=>{const t=X(),[n,s]=r.a.useState("Select");return r.a.useEffect(()=>{if(void 0!==e.selectedIndex){const t=e.content[e.selectedIndex];s(e.title(t,e.selectedIndex))}else s(e.title(e.content[0],0))},[e.selectedIndex]),r.a.createElement("div",{className:t.openControlBar},r.a.createElement(Z.a,{displayEmpty:!0,value:"",inputProps:{"aria-label":"Without label"}},r.a.createElement(H.a,{value:"",disabled:!0},n),e.content.map((t,n)=>{e.selectedIndex;return r.a.createElement(H.a,{key:n,onClick:t=>function(t,n){s(e.title(t,n)),t.handler()}(e.content[n],n)},e.content[n].title)})))},X=Object(v.a)(e=>({openControlBar:{display:"inline"}})),K="MM/DD/YYYY";const q=Object(v.a)(e=>({scrollContent:{overflow:"auto",minHeight:"200px"},table:{minWidth:"600px"},tableHead:{},tableHeaderCell:{backgroundColor:"#fff",padding:"8px",position:"sticky",top:0,zIndex:10},tableCell:{color:"inherit",padding:"0px"},tableCellText:{display:"flex",alignItems:"center",minHeight:"47px",padding:"0px 8px"},tableCellTextHighlight:{display:"flex",alignItems:"center",minHeight:"47px",padding:"0px 8px",backgroundColor:e.palette.primary.light},page:{backgroundColor:"#fff",backgroundRepeat:"no-repeat",backgroundPosition:"bottom center",backgroundSize:"100% auto",top:0,left:0,bottom:0,right:0,height:"100vh"},mainContainer:{margin:"auto",padding:"10px 0px 10px 5px",borderRadius:"7px",height:"100%",width:"100%",display:"flex",flexDirection:"column"},logo:{height:"100px",maxWidth:"100%",display:"block",marginLeft:"auto"},title:{padding:"20px 0px",margin:"auto auto auto 0"},button:{boxShadow:"none","&:hover":{boxShadow:"none"}},configBar:{display:"inline"}}));var G=n("dMCx");n("q4sD");l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement((function(){const e=d()().add(1,"d").startOf("d"),[t,n]=r.a.useState([]),[o,a]=r.a.useState(e),l=[{id:"address",title:"Address",value:e=>e.address},{id:"city",title:"City",value:e=>e.city},{id:"state",title:"State",value:e=>e.state},{id:"zip",title:"Zip",value:e=>e.zip},{id:"unit",title:"Unit",value:e=>e.unit},{id:"leaseStart",title:"Lease Start",value:e=>{var t;return null===(t=e.leaseStart)||void 0===t?void 0:t.format(K)}},{id:"leaseEnd",title:"Lease End",value:e=>{var t;return null===(t=e.leaseEnd)||void 0===t?void 0:t.format(K)}},{id:"moveOut",title:"Move-out",value:e=>{var t;return null===(t=e.moveOut)||void 0===t?void 0:t.format(K)}},{id:"tenants",title:"Tenants",value:e=>{var t;return null===(t=e.tenants)||void 0===t?void 0:t.map(e=>e.name+" "+e.phone+" "+e.email).join("; ")}},{id:"schedule",title:"Schedule",value:e=>{var t;return r.a.createElement(r.a.Fragment,null,e.scheduleMessage," ",(null!==(t=e.schedule)&&void 0!==t?t:[]).map(e=>{const t=e.d.format(K);let n="";return e.isImport&&(n="Hist:"),e.isMoveOut&&(n="MoveOut:"),n+t+"   "}))}}],[i,v]=r.a.useState({col:l[0],dir:"asc"}),[x,E]=r.a.useState(""),[k,w]=r.a.useState(5),[S,z]=r.a.useState(7),M=q();let L=t;x&&(L=L.filter(e=>{return t=e,x.toLowerCase().split(";").some(e=>0!=e.trim().length&&e.split(" ").every(e=>{var n,s,o,r,a,l,i,d,c;return 0!=e.trim().length&&((null!==(n=t.address)&&void 0!==n?n:"").toLowerCase().indexOf(e)>-1||(null!==(s=t.city)&&void 0!==s?s:"").toLowerCase().indexOf(e)>-1||(null!==(o=t.state)&&void 0!==o?o:"").toLowerCase().indexOf(e)>-1||(null!==(r=t.unit)&&void 0!==r?r:"").toLowerCase().indexOf(e)>-1||((null!==(a=t.zip)&&void 0!==a?a:"")+"").toLowerCase().indexOf(e)>-1||(null!==(i=null===(l=t.leaseStart)||void 0===l?void 0:l.format(K))&&void 0!==i?i:"").toLowerCase().indexOf(e)>-1||(null!==(c=null===(d=t.leaseEnd)||void 0===d?void 0:d.format(K))&&void 0!==c?c:"").toLowerCase().indexOf(e)>-1||!(!t.schedule||!t.schedule.map(e=>{const t=e.d.format(K);let n="";return e.isImport&&(n="Hist:"),e.isMoveOut&&(n="MoveOut:"),n+t+"   "}).join(" ").toLowerCase().includes(e)))}));var t})),L=function(e,t){const n="desc"===t.dir?-1:1;return e.sort((e,s)=>{var o,r;const a=null!==(o=t.col.accessor?t.col.accessor(e):t.col.value(e))&&void 0!==o?o:"",l=null!==(r=t.col.accessor?t.col.accessor(s):t.col.value(s))&&void 0!==r?r:"",i=F(a),d=F(l);if(void 0!==i&&void 0!==d)return n*(i.unix()-d.unix());const c=D(a),u=D(l);return void 0!==c&&void 0!==u?n*(c-u):n*a.toString().localeCompare(l.toString())})}(L,i);const B=void 0!==t.find(e=>{var t;return null===(t=e.schedule)||void 0===t?void 0:t.some(e=>e.isImport)}),N=void 0!==t.find(e=>{var t;return null===(t=e.tenants)||void 0===t?void 0:t.some(e=>!!e)});return r.a.createElement("div",{className:"App"},r.a.createElement(Y,null),r.a.createElement("div",{className:"dropzones"},r.a.createElement(U,{message:r.a.createElement(r.a.Fragment,null,"Drop the ",r.a.createElement("strong",null,"base properties list")," file here ",r.a.createElement("span",{style:{fontSize:"smaller"}},"(or click to select file)")),type:s.PropertiesBase,handleData:function(e){if(e.find(e=>e.tenants))return"Invalid format for base property list - expecting no tenant columns";e.forEach(e=>{e.schedule&&e.schedule.length>0&&console.log("Lease dates imported for "+P(e))});const t=V(e,A());return void n(t)}}),r.a.createElement(U,{message:r.a.createElement(r.a.Fragment,null,"Drop the ",r.a.createElement("strong",null,"properties list with tenant details")," file here ",r.a.createElement("span",{style:{fontSize:"smaller"}},"(or click to select file)")),type:s.PropertiesTenants,handleData:function(e){if(0==t.length)return"No base property list, upload one first";if(!e.find(e=>e.tenants))return"Invalid format for property list with tenants - expecting tenant columns";if(e.find(e=>e.schedule))return"Invalid format for previous schedule - expecting no schedule columns";try{let s=function(e,t){let n=[...e];return e.forEach(e=>e.tenants=void 0),t.filter(e=>e.tenants).forEach(t=>{var n,s;if(t.tenants.some(e=>!e.name||0==e.name.length))return void console.log("Skipping tenant property with missing name for address "+t.address);let o=e.find(e=>e.address===t.address&&e.city===t.city&&e.state===t.state&&e.zip===t.zip&&(!e.unit||e.unit===t.unit));o&&(o.tenants||(o.tenants=[]),null===(n=t.tenants)||void 0===n||n.forEach(e=>o.tenants.push(e)),t.extra&&(o.extra=null!==(s=o.extra)&&void 0!==s?s:{},Object.keys(t.extra).forEach(e=>{o.extra[e]=t.extra[e]})))}),n}(t,e);s=V(s,A()),n(s)}catch(e){return e}return}}),r.a.createElement(U,{message:r.a.createElement(r.a.Fragment,null,"Drop the ",r.a.createElement("strong",null,"previous schedule")," file here ",r.a.createElement("span",{style:{fontSize:"smaller"}},"(or click to select file)")),type:s.PropertiesSchedules,handleData:function(e){if(0==t.length)return"No base property list, upload one first";if(e.find(e=>e.tenants))return"Invalid format for base property list - expecting no tenant columns";if(!e.find(e=>e.schedule))return"Invalid format for previous schedule - expecting schedule columns";let s=function(e,t){let n=[...e];return e.forEach(e=>{var n,s,o,r,a;let l=t.find(t=>e.address===t.address&&e.city===t.city&&e.state===t.state&&e.zip===t.zip&&(!e.unit||e.unit===t.unit));e.schedule=null!==(n=null==l?void 0:l.schedule)&&void 0!==n?n:[],(null===(s=null==l?void 0:l.leaseStart)||void 0===s?void 0:s.unix())!=(null===(o=e.leaseStart)||void 0===o?void 0:o.unix())||(null===(r=null==l?void 0:l.leaseEnd)||void 0===r?void 0:r.unix())!=(null===(a=e.leaseEnd)||void 0===a?void 0:a.unix())?(e.schedule=[],l&&console.log("Lease dates changed for "+P(e)+", generating new schedule")):console.log("Lease dates imported for "+P(e))}),n}(t,e);return s=V(s,A()),void n(s)}}),r.a.createElement(U,{message:r.a.createElement(r.a.Fragment,null,"Drop the ",r.a.createElement("strong",null,"last inspection dates list")," file here ",r.a.createElement("span",{style:{fontSize:"smaller"}},"(or click to select file)")),type:s.PropertiesLastInspection,handleData:function(e){if(0==t.length)return"No base property list, upload one first";if(e.find(e=>e.tenants))return"Invalid format for last-dates property list - expecting no tenant columns";if(!e.find(e=>e.schedule))return"Invalid format for last-dates property list - expecting schedule columns";let s=function(e,t){let n=[...e];return e.forEach(e=>{let n=t.find(t=>e.address===t.address&&e.city===t.city&&e.state===t.state&&e.zip===t.zip&&(!e.unit||e.unit===t.unit));if(!n||!n.schedule||0==n.schedule.length)return;const s=n.schedule[0].d;if(!e.schedule)return void(e.schedule=null==n?void 0:n.schedule);let o=0;for(;o<e.schedule.length;)e.schedule[o].d.isBefore(s)?o++:(console.log("Removing schedule entry "+e.schedule[o].d.format(K)+" from "+P(e)+" after last inspection date: "+s.format(K)),e.schedule.splice(o,1));e.schedule.push({d:s,isImport:!0})}),n}(t,e);return s=V(s,A()),void n(s)}})),t.length>0&&r.a.createElement("span",{style:{color:"#0f0"}},t.length," properties available."),0==t.length&&r.a.createElement("span",{style:{color:"#f00"}},t.length," properties available."),N&&r.a.createElement("span",{style:{color:"#0f0",marginLeft:"10px"}},"Tenant data loaded."),!N&&r.a.createElement("span",{style:{color:"#f00",marginLeft:"10px"}},"No tenant data loaded."),B&&r.a.createElement("span",{style:{color:"#0f0",marginLeft:"10px"}},"Previous schedule loaded."),!B&&r.a.createElement("span",{style:{color:"#f00",marginLeft:"10px"}},"No previous schedule loaded."),r.a.createElement("div",{className:M.scrollContent},r.a.createElement("div",{className:M.configBar},r.a.createElement("input",{type:"text",placeholder:"Filter",onChange:e=>{var t;return E(null!==(t=e.target.value)&&void 0!==t?t:"")},value:x}),r.a.createElement("span",{style:{padding:"0px 20px"}},r.a.createElement(J,{title:e=>"Download CSV",content:[{title:"Inspections",handler:function(){const e=document.createElement("a");let n=function(e){const t=Object.keys(O);let n=[],s=[],o=e.map(e=>{var o,r;let a={};return t.forEach(t=>{var n;const s=O[t];let o=e[s.field];switch(null==s?void 0:s.type){case"date":o=null===(n=o)||void 0===n?void 0:n.format(K)}a[t]=o}),null===(o=e.schedule)||void 0===o||o.forEach((e,t)=>{let s="Inspection "+(t+1);a[s]=e.d.format(K),n.length<t+1&&n.push(s)}),Object.keys(null!==(r=e.extra)&&void 0!==r?r:{}).forEach(e=>{s.includes(e)||s.push(e)}),s.forEach(t=>{var n;let s=null===(n=e.extra)||void 0===n?void 0:n[t];s&&(a[t]=s)}),a});return[...t,...n].forEach(e=>{s.includes(e)&&console.log('Warning: exported property contains natural field and unexpected/custom imported column: "'+e+'"')}),b.a.unparse(o,{skipEmptyLines:!0,columns:[...t,...s,...n],newline:"\n"})}(t),s=new Blob([n],{type:"text/csv"});e.href=URL.createObjectURL(s),e.download="rei-property-inspections.csv",e.click()}},{title:"Schedule",handler:function(){const e=document.createElement("a");let n=function(e){let t=[],n=[];e.forEach(e=>{var s,o;null===(s=e.schedule)||void 0===s||s.forEach((n,s)=>{t.push({p:e,date:n.d,number:s+1,type:n.isMoveOut?"Move-out":"Quarterly"})}),Object.keys(null!==(o=e.extra)&&void 0!==o?o:{}).forEach(e=>{n.includes(e)||n.push(e)})}),t.sort((e,t)=>{const n=e.date.unix()-t.date.unix();return 0!=n?n:e.p.address.localeCompare(t.p.address)});const s=Object.keys(C),o=Object.keys(I);[...s,...o].forEach(e=>{n.includes(e)&&console.log('Warning: exported property contains natural field and unexpected/custom imported column: "'+e+'"')});let r=t.map(e=>{let t={};return s.forEach(n=>{var s;const o=C[n];let r=void 0;switch(r=o.isSchedField?e[o.field]:e.p[o.field],null==o?void 0:o.type){case"date":r=null===(s=r)||void 0===s?void 0:s.format(K)}t[n]=r}),o.forEach(n=>{var s;const o=I[n];let r=null===(s=e.p.tenants)||void 0===s?void 0:s.map((e,t)=>"["+(t+1)+"] "+e[o.field]).join(" ");t[n]=r}),n.forEach(n=>{var s;let o=null===(s=e.p.extra)||void 0===s?void 0:s[n];o&&(t[n]=o)}),t});return b.a.unparse(r,{skipEmptyLines:!0,columns:[...s,...o,...n],newline:"\n"})}(t),s=new Blob([n],{type:"text/csv"});e.href=URL.createObjectURL(s),e.download="rei-schedule.csv",e.click()}}]})),"Schedule Start Date:",r.a.createElement(y.a,{utils:g.a},r.a.createElement(j.a,{value:o,style:{width:"140px"},placeholder:o.format(K),onChange:e=>{var t;const n=null!==(t=e)&&void 0!==t?t:d()();n.isValid()&&(a(n),T())},format:K,rifmFormatter:e=>e})),r.a.createElement("span",{style:{padding:"0px 20px"}},r.a.createElement(J,{title:(e,t)=>"Max per day: "+(t+1),content:Array.from({length:30},(e,t)=>t).map(e=>({title:""+(e+1),handler:()=>{w(e+1),T()}})),selectedIndex:k-1})),r.a.createElement("span",{style:{padding:"0px 20px"}},r.a.createElement(J,{title:(e,t)=>"Max per week: "+(t+1),content:Array.from({length:30},(e,t)=>t).map(e=>({title:""+(e+1),handler:()=>{z(e+1),T()}})),selectedIndex:S-1}))),r.a.createElement(c.a,{"aria-labelledby":"tableTitle",className:M.table},r.a.createElement(u.a,{className:M.tableHead},r.a.createElement(p.a,null,l.map((e,t)=>r.a.createElement(m.a,{key:t,className:M.tableHeaderCell,sortDirection:i.dir},r.a.createElement(h.a,{active:i.col.id===e.id,direction:i.dir,onClick:()=>function(e,t,n){e.col.id!==t.id?n({col:t,dir:"asc"}):n({col:t,dir:"asc"===e.dir?"desc":"asc"})}(i,e,v)},e.title))))),r.a.createElement(f.a,{className:M.scrollContent},L.map((e,t)=>r.a.createElement(p.a,{key:e.pid},l.map((t,n)=>r.a.createElement(m.a,{className:M.tableCell,key:e.pid+"."+t.id,scope:"row"},r.a.createElement("div",{className:M.tableCellText},t.value(e))))))))));function T(){t.forEach(e=>{var t;e.schedule=(null!==(t=e.schedule)&&void 0!==t?t:[]).filter(e=>e.isImport),console.log("Computed schedule reset for "+P(e))});let e=V(t,A());n(e)}function A(){const e=[];return{scheduleStart:o,scheduleMax:d()(o).add(3,"years"),moveInBuffer:e=>d()(e).add(3,"months"),moveOutBuffer:e=>e,maxPerDay:k,maxPerWeek:S,pushBlackout:t=>{let n=!1;for(;!n;){n=!0;let s=t.day();0!=s&&6!=s||(t=t.clone().add(1,"day"),n=!1),e.find(e=>e.isSame(t))&&(t=t.clone().add(1,"day"),n=!1)}return t}}}}),null)),document.getElementById("root")),G.a()},"LuP/":function(e,t,n){(t=n("JPst")(!1)).push([e.i,".App {\n\ttext-align: center;\n}\n\n.App-header {\n\tbackground-color: #282c34;\n\t/* min-height: 100vh; */\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\t/* justify-content: center; */\n\tfont-size: calc(10px + 2vmin);\n\tcolor: white;\n}\n\n.App-link {\n\tcolor: #61dafb;\n}\n\n.dropzones {\n\twidth: 100%;\n}\n\n.dropZone {\n\tdisplay: inline-block;\n\tposition: relative;\n\twidth: 290px;\n\tmin-height: 100px;\n\tmargin: 20px 20px 20px 20px;\n\tbackground-color: #F0F0F0;\n\tborder: dashed;\n\tborder-color: #C8C8C8;\n\tcursor: pointer;\n\tbox-sizing: border-box\n}\n.stripes {\n\tborder: solid;\n\tbackground-image: repeating-linear-gradient(-45deg, #F0F0F0, #F0F0F0 25px, #C8C8C8 25px, #C8C8C8 50px);\n\tanimation: progress 2s linear infinite !important;\n\tbackground-size: 150% 100%\n}\n.rejectStripes {\n\tbackground-image: repeating-linear-gradient(-45deg, #fc8785, #fc8785 25px, #f4231f 25px, #f4231f 50px)\n}\n.processingStripes {\n\tbackground-image: repeating-linear-gradient(-45deg, #87fc85, #87fc85 25px, #23f41f 25px, #23f41f 50px)\n}\n.dropzoneTextStyle {\n\ttext-align: center\n}\n.uploadIconSize {\n\twidth: 51;\n\theight: 51;\n\tcolor: #909090\n}\n",""]),e.exports=t},Q8kY:function(e,t,n){var s=n("LboF"),o=n("LuP/");"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var r={insert:"head",singleton:!1};s(o,r);e.exports=o.locals||{}},RnhZ:function(e,t,n){var s={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn-bd":"loYQ","./bn-bd.js":"loYQ","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-in":"7C5Q","./en-in.js":"7C5Q","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./en-sg":"t+mt","./en-sg.js":"t+mt","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-mx":"tbfe","./es-mx.js":"tbfe","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fil":"1ppg","./fil.js":"1ppg","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./ga":"USCx","./ga.js":"USCx","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-deva":"qvJo","./gom-deva.js":"qvJo","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it-ch":"bxKX","./it-ch.js":"bxKX","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ku":"JCF/","./ku.js":"JCF/","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./oc-lnc":"Fnuy","./oc-lnc.js":"Fnuy","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tk":"Wv91","./tk.js":"Wv91","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-mo":"OmwH","./zh-mo.js":"OmwH","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function o(e){var t=r(e);return n(t)}function r(e){if(!n.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}o.keys=function(){return Object.keys(s)},o.resolve=r,e.exports=o,o.id="RnhZ"},dMCx:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function s(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})}}).call(this,n("8oxB"))}},[["2YZa",1,2]]]);